<!DOCTYPE html><!--[if IE 8]>
<html id="ie8" dir="ltr" lang="zh-CN"
	prefix="og: https://ogp.me/ns#" >
<![endif]--><!--[if !(IE 8) ]><!--><html dir="ltr" lang="zh-CN" prefix="og: https://ogp.me/ns#"><!--<![endif]--><head><meta charset="UTF-8"/><title>酷壳 – CoolShell.cn</title><link rel="stylesheet" type="text/css" href="/assets/all.min.css"/><link rel="shortcut icon" href="/assets/favicon.png"/></head>
<body class="home blog group-blog">

<div id="page" class="hfeed site">
<header id="masthead" role="banner">

<div id="cc_spacer"></div>
<div class="site-header">

<div class="site-branding">
<a class="home-link" href="/" title="酷 壳 – CoolShell" rel="home">
<h1 class="site-title">酷 壳 – CoolShell</h1>
<h2 class="site-description">享受编程和技术所带来的快乐 – Coding Your Ambition</h2>
</a>
</div>
</div>
</header>
<div class="container">
<div class="row">

</div>
</div>
<div id="content" class="site-content">
<div class="container">
<div class="row">
<div id="primary" class="content-area  col-md-12" style="margin-top: 40px;">
<main id="main" class="site-main" role="main">
<article id="post-22422" class="post-content post-22422 post type-post status-publish format-standard hentry category-itnews category-misc category-602 tag-aws tag-lambda tag-microservice tag-serverless tag-step-function">
<header class="entry-header">
<span class="screen-reader-text">是微服务架构不香还是云不香？</span>
<h2 class="entry-title">
<a href="/articles/22422.html" rel="bookmark">是微服务架构不香还是云不香？</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/22422.html" title="17:52" rel="bookmark"><time class="entry-date" datetime="2023-05-08T17:52:06+08:00" pubdate="">2023年05月08日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/22422.html#comments" class="comments-link">32 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 12,756 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" class="alignright size-medium wp-image-22424" src="/uploads/2023/05/monolith.microservices-300x200.png" alt="" width="300" height="200" srcset="" sizes="(max-width: 300px) 100vw, 300px"/>这两天技术圈里热议的一件事就是Amazon的流媒体平台Prime Video在2023年3月22日发布了一篇技术博客《<a title="Scaling up the Prime Video audio/video monitoring service and reducing costs by 90%" href="https://www.primevideotech.com/video-streaming/scaling-up-the-prime-video-audio-video-monitoring-service-and-reducing-costs-by-90" target="_blank" rel="noopener">规模化Prime Video的音视频监控服务，成本降低90%</a>》，副标题：“<strong>从分布式微服务架构到单体应用程序的转变有助于实现更高的规模、弹性和降低成本</strong>”，有人把这篇文章在五一期间转到了<a href="https://www.reddit.com/r/programming/comments/137alxn/prime_video_switched_from_serverless_to_ec2_and/" target="_blank" rel="noopener">reddit</a> 和 <a href="https://news.ycombinator.com/item?id=35811741" target="_blank" rel="noopener">hacker news</a> 上，在Reddit上热议。这种话题与业内推崇的微服务架构形成了鲜明的对比。从“微服务架构”转“单体架构”，还是Amazon干的，这个话题足够劲爆。然后DHH在刚<a href="https://twitter.com/dhh/status/1655076668787097607" target="_blank" rel="noopener">喷完Typescript</a>后继续发文《<a href="https://world.hey.com/dhh/even-amazon-can-t-make-sense-of-serverless-or-microservices-59625580" target="_blank" rel="noopener">即便是亚马逊也无法理解Servless或微服务</a>》，继续抨击微服务架构，于是，瞬间引爆技术圈，登上技术圈热搜。</p>
<p>今天上午有好几个朋友在微信里转了三篇文章给我，如下所示：</p>
<ul>
<li>《<a href="https://mp.weixin.qq.com/s/mEmz8pviahEAWy1-SA8vcg" target="_blank" rel="noopener">微服务是不是个蠢主意？</a>》</li>
<li>《<a href="https://mp.weixin.qq.com/s/7zm5YyeZhQ2mu2TJvOK5tQ" target="_blank" rel="noopener">单体回归？亚马逊放弃用于视频监控的微服务</a> 》</li>
<li>《<a href="https://mp.weixin.qq.com/s/fQtAMf4BfJxdBPWDE5ygwg" target="_blank" rel="noopener">从微服务转为单体架构、成本降低 90%，亚马逊内部案例引发轰动</a>》</li>
</ul>
<p>看看这些标题就知道这些文章要的是流量而不是好好写篇文章。看到第二篇，你还真当 Prime Video 就是 Amazon 的全部么？然后，再看看这些文章后面的跟风评论，我觉得有 80%的人只看标题，而且是连原文都不看的。所以，我想我得写篇文章了……</p>
<p> <a href="/articles/22422.html#more-22422" class="more-link">…</a></p><a href="/articles/22422.html#more-22422" class="more-link">
</a><p class="read-more"><a href="/articles/22422.html#more-22422" class="more-link"></a><a class="btn btn-default" href="/articles/22422.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-22422-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-22398" class="post-content post-22398 post type-post status-publish format-standard hentry category-itnews category-technews tag-chatgpt tag-google">
<header class="entry-header">
<span class="screen-reader-text">我看ChatGPT: 为啥谷歌掉了千亿美金</span>
<h2 class="entry-title">
<a href="/articles/22398.html" rel="bookmark">我看ChatGPT: 为啥谷歌掉了千亿美金</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/22398.html" title="00:31" rel="bookmark"><time class="entry-date" datetime="2023-02-12T00:31:16+08:00" pubdate="">2023年02月12日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/22398.html#comments" class="comments-link">20 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 24,903 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright size-medium wp-image-22405" src="/uploads/2023/02/chatgpt-300x200.jpg" alt="" width="300" height="200" srcset="" sizes="(max-width: 300px) 100vw, 300px"/>两个月前，我试着想用 ChatGPT 帮我写篇文章《<a title="eBPF 介绍" href="/articles/22320.html">eBPF 介绍</a>》，结果错误百出，导致我又要从头改一遍，从那天我觉得 ChatGPT 生成的内容完全不靠谱，所以，从那天开始我说我不会再用 ChatGPT 来写文章（这篇文章不是由 ChatGPT 生成），因为，在试过一段时间后，我对 ChatGTP 有基于如下的认识：</p>
<ol>
<li><strong>ChatGPT 不是基于事实，是基于语言模型的</strong>，事实对他来说不重要，对他重要的是他能读懂你的问题，并按照一定的套路回答你的问题。</li>
<li><strong>因为是基于套路的回答，所以，他并不能保证内容是对的，他的目标是找到漂亮的精彩的套路</strong>，于是，你会发现，他的内容组织能力和表述还不错，但是只要你认真玩上一段时间，你会发现，ChatGPT 那些表述的套路其实也比较平常一般。它的很多回答其实都不深，只能在表面上。就像 Github 的 Copilot 一样，写不了什么高级的代码，只能帮你写一些常规格式化的代码（当然，这也够了）</li>
</ol>
<figure id="attachment_22417" aria-describedby="caption-attachment-22417" style="width: 640px" class="wp-caption aligncenter"><img decoding="async" loading="lazy" class="wp-image-22417 size-large" src="/uploads/2023/02/chatgpt.example-1024x853.jpg" alt="" width="640" height="533" srcset="" sizes="(max-width: 640px) 100vw, 640px"/><figcaption id="caption-attachment-22417" class="wp-caption-text">ChatGPT 就是一个语言模型，如果不给他足够的数据和信息，它基本就是在胡编乱造</figcaption></figure>
<p>所以，基于上面这两个点认识，以发展的眼光来看问题，我觉得 ChatGPT 这类的 AI 可以成为一个小助理，他的确可以干掉那些初级的脑力工作者，但是，还干不掉专业的人士，这个我估计未来也很难，不过，这也很帅了，因为大量普通的工作的确也很让人费时间和精力，<strong>但是有个前提条件——就是ChatGPT所产生的内容必需是真实可靠的，没有这个前提条件的话，那就什么用也没有了</strong>。</p>
<p>今天，我想从另外一个角度来谈谈 ChatGPT，尤其是我在Youtube上看完了微软的发布会《<a href="https://youtu.be/rOeRWRJ16yY" target="_blank" rel="noopener">Introducing your copilot for the web: AI-powered Bing and Microsoft Edge</a> 》，才真正意识到Google 的市值为什么会掉了1000亿美元，是的，<strong>谷歌的搜索引擎的霸主位置受到了前所未有的挑战</strong>……</p>
<p> <a href="/articles/22398.html#more-22398" class="more-link">…</a></p><a href="/articles/22398.html#more-22398" class="more-link">
</a><p class="read-more"><a href="/articles/22398.html#more-22398" class="more-link"></a><a class="btn btn-default" href="/articles/22398.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-22398-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-22367" class="post-content post-22367 post type-post status-publish format-standard hentry category-itnews category-602 category-netsecurity tag-censorship tag-network tag-nostr tag-social-media tag-twitter">
<header class="entry-header">
<span class="screen-reader-text">聊聊 nostr 和 审查</span>
<h2 class="entry-title">
<a href="/articles/22367.html" rel="bookmark">聊聊 nostr 和 审查</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/22367.html" title="15:46" rel="bookmark"><time class="entry-date" datetime="2023-02-03T15:46:13+08:00" pubdate="">2023年02月03日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/22367.html#comments" class="comments-link">12 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 20,912 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright size-medium wp-image-22368" src="/uploads/2023/02/nostr-aplicacion-descentralizada-1140x570-1-300x150.png" alt="" width="300" height="150" srcset="" sizes="(max-width: 300px) 100vw, 300px"/>这两天在网络上又有一个东西火了，Twitter 的创始人 <a href="https://twitter.com/jack">@jack</a> 新的社交 iOS App  <a href="https://apps.apple.com/ca/app/damus/id1628663131" target="_blank" rel="noopener">Damus</a> 上苹果商店（第二天就因为违反中国法律在中国区下架了），这个软件是一个去中心化的 Twitter，使用到的是 nostr – Notes and Other Stuff Transmitted by Relays 的协议（<a href="https://github.com/nostr-protocol/nostr" target="_blank" rel="noopener">协议简介</a>，<a href="https://github.com/nostr-protocol/nips" target="_blank" rel="noopener">协议细节</a>），协议简介中有很大的篇幅是在批评Twitter和其相类似的中心化的产品，如：<a href="https://mastodon.social/" target="_blank" rel="noopener">Mastodon</a> 和 <a href="https://scuttlebutt.nz/" target="_blank" rel="noopener">Secure Scuttlebutt</a> 。我顺着去看了一下这个协议，发现这个协议真是非常的简单，简单到几句话就可以讲清楚了。</p>
<h4>通讯过程</h4>
<ul>
<li>这个协议中有两个东西，一个是 client，一个是 relay，client 就是用户社交的客户端，relay 就是转发服务器。</li>
<li>用户不需要注册，用户只需要有一个密钥对（公钥+私钥）就好了，然后把要发的信息做签名，发给一组 relays</li>
<li>然后你的 Follower 就可以从这些 relays 上订阅到你的信息。</li>
</ul>
<p> <a href="/articles/22367.html#more-22367" class="more-link">…</a></p><a href="/articles/22367.html#more-22367" class="more-link">
</a><p class="read-more"><a href="/articles/22367.html#more-22367" class="more-link"></a><a class="btn btn-default" href="/articles/22367.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-22367-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-22341" class="post-content post-22341 post type-post status-publish format-standard hentry category-misc tag-covid19">
<header class="entry-header">
<span class="screen-reader-text">感染新冠的经历</span>
<h2 class="entry-title">
<a href="/articles/22341.html" rel="bookmark">感染新冠的经历</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/22341.html" title="15:39" rel="bookmark"><time class="entry-date" datetime="2022-12-13T15:39:39+08:00" pubdate="">2022年12月13日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/22341.html#comments" class="comments-link">23 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 73,133 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright size-medium wp-image-22346" src="/uploads/2022/12/covid19-300x225.jpg" alt="" width="300" height="225" srcset="" sizes="(max-width: 300px) 100vw, 300px"/>写一篇与技术无关的文章，供大家参考。我住北京朝阳，从上周三开始我家一家三口陆续发烧生病，自测抗原后，都是阳性。好消息是，这个奥密克戎跟一般的病毒性感冒差不多，没什么可怕的，不过，整个过程除了发病之外还有一些别的因为感染带出来的事，大家也需要知晓，以准备好，以免造成生活的不便，更好的照顾好自己和家人。</p>
<h4>整个过程</h4>
<p>我先说一下整个过程（我会不断更新这个过程，直到转阴）。说明一下，<strong>我孩子老婆都打过三针国产疫苗，孩子是科兴，老婆是北京生物，我完全没有打</strong>。</p>
<p>先是我家孩子（12 岁）。上周三（12 月 7 日），孩子早上起来就说头疼，一测体温，38 度 5，就停止上网课，老实休息了，我们并没给孩子吃什么药，到了晚上，孩子的体温到了 39.4，嗓子疼，我老婆用酒精给孩子物理降温（注：事实上最好别用酒精，因为会被皮肤吸收导致副作用），成功降到了 38.2 左右。周四（12 月 8 日），孩子的体温在 38.2 一天，我老婆给孩子吃了莲花清瘟，被我制止了，本来想上退烧药的，但是我想体温也不算高，能不吃就不吃，于是就让孩子冲了个复方感冒冲剂（其实里面含对乙酰氨基酚，后面会说）。周五（12 月 9 日），孩子不停地出汗，到下午体温正常了，然后咳嗽，鼻涕就来了，感冒症状来了，但精神不好，体虚无力。周末休息两天就基本没事了，也转阴了。</p>
<p>接下来就到我了。</p>
<p> <a href="/articles/22341.html#more-22341" class="more-link">…</a></p><a href="/articles/22341.html#more-22341" class="more-link">
</a><p class="read-more"><a href="/articles/22341.html#more-22341" class="more-link"></a><a class="btn btn-default" href="/articles/22341.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-22341-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-22320" class="post-content post-22320 post type-post status-publish format-standard hentry category-cplusplus category-unixlinux category-operatingsystem category-netsecurity tag-debug tag-ebpf tag-linux">
<header class="entry-header">
<span class="screen-reader-text">eBPF 介绍</span>
<h2 class="entry-title">
<a href="/articles/22320.html" rel="bookmark">eBPF 介绍</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/22320.html" title="10:38" rel="bookmark"><time class="entry-date" datetime="2022-12-10T10:38:51+08:00" pubdate="">2022年12月10日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/22320.html#comments" class="comments-link">18 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 38,058 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright wp-image-22329 size-full" src="/uploads/2022/12/eBPF.jpeg" alt="" width="301" height="167" srcset=""/>很早前就想写一篇关于eBPF的文章，但是迟迟没有动手，这两天有点时间，所以就来写一篇，这文章主要还是简单的介绍eBPF 是用来干什么的，并通过几个示例来介绍是怎么玩的，这个技术非常非常之强，Linux 操作系统的观测性实在是太强大了，并在 BCC 加持下变得一览无余。这个技术不是一般的运维人员或是系统管理员可以驾驭的，这个还是要有底层系统知识并有一定开发能力的技术人员才能驾驭的了的。<strong>我在这篇文章的最后给了个彩蛋。</strong></p>
<h4>介绍</h4>
<p>eBPF（extened Berkeley Packet Filter）是一种内核技术，它允许开发人员在不修改内核代码的情况下运行特定的功能。eBPF 的概念源自于 Berkeley Packet Filter（BPF），后者是由贝尔实验室开发的一种网络过滤器，可以捕获和过滤网络数据包。</p>
<p>出于对更好的 Linux 跟踪工具的需求，eBPF 从 <a href="https://illumos.org/books/dtrace/chp-intro.html">dtrace</a>中汲取灵感，dtrace 是一种主要用于 Solaris 和 BSD 操作系统的动态跟踪工具。与 dtrace 不同，Linux 无法全面了解正在运行的系统，因为它仅限于系统调用、库调用和函数的特定框架。<a href="https://www.kernel.org/doc/html/latest/bpf/index.html">在Berkeley Packet Filter</a>  (BPF)（一种使用内核 VM 编写打包过滤代码的工具）的基础上，一小群工程师开始扩展 BPF 后端以提供与 dtrace 类似的功能集。 eBPF 诞生了。<strong>2014 年随 Linux 3.18 首次限量发布，充分利用 eBPF 至少需要 Linux 4.4 以上版本</strong>。</p>
<p> <a href="/articles/22320.html#more-22320" class="more-link">…</a></p><a href="/articles/22320.html#more-22320" class="more-link">
</a><p class="read-more"><a href="/articles/22320.html#more-22320" class="more-link"></a><a class="btn btn-default" href="/articles/22320.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-22320-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-22298" class="post-content post-22298 post type-post status-publish format-standard hentry category-misc tag-discord tag-programmer tag-slack tag-880 tag-58">
<header class="entry-header">
<span class="screen-reader-text">聊聊团队协同和协同工具</span>
<h2 class="entry-title">
<a href="/articles/22298.html" rel="bookmark">聊聊团队协同和协同工具</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/22298.html" title="12:20" rel="bookmark"><time class="entry-date" datetime="2022-10-14T12:20:38+08:00" pubdate="">2022年10月14日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/22298.html#comments" class="comments-link">52 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 28,006 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright size-medium wp-image-22308" src="/uploads/2022/10/communication-300x168.png" alt="" width="300" height="168" srcset="" sizes="(max-width: 300px) 100vw, 300px"/>这两天跟 <a href="https://twitter.com/CaliCastleMusic" target="_blank" rel="noopener">Cali</a> 和 <a href="https://twitter.com/RatherJie" target="_blank" rel="noopener">Rather</a> 做了一个线上的 <a href="https://kjsyp.fm/podcasts/43961/episodes/ep5-ft-megaease" target="_blank" rel="noopener">Podcast – Ep.5 一起聊聊团队协同</a>。主要是从 IM 工具扩展开来聊了一下团队的协同和相应的工具，但是聊天不是深度思考，有一些东西我没有讲透讲好，所以，我需要把我更多更完整更结构化的想法形成文字。（注：聊天聊地比较详细，本文只是想表达我的主要想法）</p>
<h4>国内外的企业 IM 的本质差别</h4>
<p>国内企业级在线交流工具主要有：企业微信、钉钉、飞书，国外的则是：Slack、Discord这两大IM工具，你会发现，他们有很多不一样的东西，<strong>其中有两个最大的不同，一个是企业管理，一个是企业文化。</strong></p>
<h5>企业管理</h5>
<p><strong>Slack/Discrod 主要是通过建 Channel ，而国内的IM则主要是拉群</strong>。你可能会说，这不是一样的吗？其实是不一样的，很明显，Channel 的属性是相对持久的，而群的属性则是临时的，前者是可以是部门，可以是团队，可以是项目，可以是产品，可以是某种长期存在的职能（如：技术分享），而拉群则是相对来说临时起意的，有时候，同样的人群能被重复地拉出好几次，因为之前临时起意的事做完了，所以群就被人所遗忘了，后面再有事就再来。<strong>很明显，Channel 这种方式明显是有管理的属性的，而拉群则是没有管理的</strong>。</p>
<p> <a href="/articles/22298.html#more-22298" class="more-link">…</a></p><a href="/articles/22298.html#more-22298" class="more-link">
</a><p class="read-more"><a href="/articles/22298.html#more-22298" class="more-link"></a><a class="btn btn-default" href="/articles/22298.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-22298-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-22263" class="post-content post-22263 post type-post status-publish format-standard hentry category-go- category-unixlinux category-operatingsystem category-proglanguage tag-so_linger tag-tcp tag-time_wait">
<header class="entry-header">
<span class="screen-reader-text">从一次经历谈 TIME_WAIT 的那些事</span>
<h2 class="entry-title">
<a href="/articles/22263.html" rel="bookmark">从一次经历谈 TIME_WAIT 的那些事</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/22263.html" title="14:43" rel="bookmark"><time class="entry-date" datetime="2022-07-19T14:43:39+08:00" pubdate="">2022年07月19日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/22263.html#comments" class="comments-link">31 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 36,542 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright" src="/uploads/2022/07/wall_clock-300x167.jpeg" alt="" width="400" height="222" srcset=""/>今天来讲一讲TCP 的 <code>TIME_WAIT</code> 的问题。这个问题尽人皆知，不过，这次遇到的是不太一样的场景，前两天也解决了，正好写篇文章，顺便把 <code>TIME_WAIT</code> 的那些事都说一说。对了，这个场景，跟我开源的探活小工具 <a href="https://github.com/megaease/easeprobe">EaseProbe</a> 有关，我先说说这个场景里的问题，然后，顺着这个场景跟大家好好说一下这个事。</p>
<h4>问题背景</h4>
<p>先说一下背景，<a href="https://github.com/megaease/easeprobe">EaseProbe</a> 是一个轻量独立的用来探活服务健康状况的小工具，支持http/tcp/shell/ssh/tls/host以及各种中间件的探活，然后，直接发送通知到主流的IM上，如：Slack/Telegram/Discrod/Email/Team，包括国内的企业微信/钉钉/飞书， 非常好用，用过的人都说好 😏。</p>
<p>这个探活工具在每次探活的时候，必须要从头开始建立整个网络链接，也就是说，需要从头开始进行DNS查询，建立TCP链接，然后进行通信，再关闭链接。这里，我们不会设置 TCP 的 KeepAlive 重用链接，因为探活工具除了要探活所远端的服务，还要探活整个网络的情况，所以，每次探活都需要从新来过，这样才能捕捉得到整个链路的情况。</p>
<p> <a href="/articles/22263.html#more-22263" class="more-link">…</a></p><a href="/articles/22263.html#more-22263" class="more-link">
</a><p class="read-more"><a href="/articles/22263.html#more-22263" class="more-link"></a><a class="btn btn-default" href="/articles/22263.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-22263-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-22242" class="post-content post-22242 post type-post status-publish format-standard hentry category-go- category-progdesign tag-easegress tag-etcd tag-go tag-performance">
<header class="entry-header">
<span class="screen-reader-text">ETCD的内存问题</span>
<h2 class="entry-title">
<a href="/articles/22242.html" rel="bookmark">ETCD的内存问题</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/22242.html" title="16:13" rel="bookmark"><time class="entry-date" datetime="2022-05-05T16:13:37+08:00" pubdate="">2022年05月05日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/22242.html#comments" class="comments-link">39 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 32,885 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright size-full wp-image-22247" src="/uploads/2022/05/etcd.png" alt="" width="275" height="183" srcset=""/>今天跟大家分享一个etcd的内存大量占用的问题，这是前段时间在我们开源软件Easegress中遇到的问题，问题是比较简单的，但是我还想把前因后果说一下，包括，为什么要用etcd，使用etcd的用户场景，包括etcd的一些导致内存占用比较大的设计，以及最后一些建议。希望这篇文章不仅仅只是让你看到了一个简单的内存问题，还能让你有更多的收获。当然，也欢迎您关注我们的开源软件，给我们一些鼓励。</p>
<h4>为什么要用ETCD</h4>
<p>先说一下为什么要用etcd。先从一个我们自己做的一个API网关 – Easegress（<a href="https://github.com/megaease/easegress">源码</a>）说起。</p>
<p><a href="https://github.com/megaease/easegress" target="_blank" rel="noopener">Easegress</a> 是我们开发并开源的一个API应用网关产品，这个API应用网关不仅仅只是像nginx那样用来做一个反向代理，这个网关可以做的事很多，比如：API编排、服务发现、弹力设计（熔断、限流、重试等）、认证鉴权（JWT，OAuth2，HMAC等）、同样支持各种Cloud Native的架构如：微服务架构，Service Mesh，Serverless/FaaS的集成，并可以用于扛高并发、灰度发布、全链路压力测试、物联网……等更为高级的企业级的解决方案。所以，为了达到这些目标，在2017年的时候，我们觉得在现有的网关如Nginx上是无法演进出来这样的软件的，必需重新写一个（后来其他人也应该跟我们的想法一样，所以，Lyft写了一个Envoy。只不过，Envoy是用C++写的，而我用了技术门槛更低的Go语言）</p>
<p>另外，Easegress最核心的设计主要有三个：</p>
<p> <a href="/articles/22242.html#more-22242" class="more-link">…</a></p><a href="/articles/22242.html#more-22242" class="more-link">
</a><p class="read-more"><a href="/articles/22242.html#more-22242" class="more-link"></a><a class="btn btn-default" href="/articles/22242.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-22242-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-22173" class="post-content post-22173 post type-post status-publish format-standard hentry category-technews category-progdesign tag-http tag-programmer tag-restful tag-58">
<header class="entry-header">
<span class="screen-reader-text">“一把梭：REST API 全用 POST”</span>
<h2 class="entry-title">
<a href="/articles/22173.html" rel="bookmark">“一把梭：REST API 全用 POST”</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/22173.html" title="12:28" rel="bookmark"><time class="entry-date" datetime="2022-02-13T12:28:47+08:00" pubdate="">2022年02月13日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/22173.html#comments" class="comments-link">119 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 95,197 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><img decoding="async" loading="lazy" class="alignright wp-image-22176" src="/uploads/2022/02/http_method-300x169.png" alt="" width="325" height="183" srcset="" sizes="(max-width: 325px) 100vw, 325px"/></p>
<p>写这篇文章的原因主要还是因为V2EX上的这个<a href="https://www.v2ex.com/t/830030?p=1" target="_blank" rel="noopener">贴子</a>，这个贴子中说——</p>
<blockquote><p>“对接同事的接口，他定义的所有接口都是 post 请求，理由是 https 用 post 更安全，之前习惯使用 restful api ，如果说 https 只有 post 请求是安全的话？那为啥还需要 get 、put 、delete ？我该如何反驳他。”</p></blockquote>
<p>然后该贴中大量的回复大概有这么几种论调，1）POST挺好的，就应该这么干，沟通少，2）一把梭，早点干完早点回家，3）吵赢了又怎么样？工作而已，优雅不能当饭吃。虽然评论没有一边倒，但是也有大量的人支持。然后，我在Twitter上嘲讽了一下，用POST干一切就像看到了来你家装修工人说，“老子干活就是用钉子钉一切，什么螺丝、螺栓、卡扣、插销……通通不用，钉枪一把梭，方便，快捷，安全，干完早回家……不过，还是有一些网友觉得用POST挺好的，而且可以节约时间。所以，正好，我在《<a title="我做系统架构的一些原则" href="/articles/21672.html" target="_blank" rel="noopener">我做系统架构的原则</a>》中的“<a href="/articles/21672.html#%E5%8E%9F%E5%88%99%E4%BA%94%EF%BC%9A%E5%88%B6%E5%AE%9A%E5%B9%B6%E9%81%B5%E5%BE%AA%E6%9C%8D%E4%BB%8E%E6%A0%87%E5%87%86%E3%80%81%E8%A7%84%E8%8C%83%E5%92%8C%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5" target="_blank" rel="noopener">原则五</a>”中反对API返回码无论对错全是200的返回那，我专门写下这一篇文章，以正视听。</p>
<p>这篇文章主要分成下面这几个部分：</p>
<ol>
<li>为什么要用不同的HTTP动词？</li>
<li>Restful 进行复杂查询</li>
<li>几个主要问题的回应
<ul>
<li>POST 更安全吗？</li>
<li>全用 POST 可以节省时间沟通少吗？</li>
<li>早点回家的正确姿势</li>
<li>工作而已，优雅不能当饭吃</li>
</ul>
</li>
</ol>
<p> <a href="/articles/22173.html#more-22173" class="more-link">…</a></p><a href="/articles/22173.html#more-22173" class="more-link">
</a><p class="read-more"><a href="/articles/22173.html#more-22173" class="more-link"></a><a class="btn btn-default" href="/articles/22173.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-22173-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<article id="post-22157" class="post-content post-22157 post type-post status-publish format-standard hentry category-technews category-550 category-career tag-programmer tag-58">
<header class="entry-header">
<span class="screen-reader-text">谈谈公司对员工的监控</span>
<h2 class="entry-title">
<a href="/articles/22157.html" rel="bookmark">谈谈公司对员工的监控</a>
</h2>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/22157.html" title="15:50" rel="bookmark"><time class="entry-date" datetime="2022-02-12T15:50:06+08:00" pubdate="">2022年02月12日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/22157.html#comments" class="comments-link">26 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 57,097 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p>今天看到微博上有一个热点事件， 是一个关于某公司做的一个监控员工离职倾向的软件，从截图中可以看到员工访问招聘网站的次数，还有投递的简历以及搜索的关建词等等信息，通过这些信息分析员工的离职倾向。然后我发一个微博，说了一下，我以前工作过的公司无论外国公司还是中国公司都有这样的情况，收到一些人来问我相关的情况，所以，我想还是写篇文章详细地说一下，我对这种事情的看法。</p>
<p><a href="https://coolshell.cn/wp-content/uploads/2022/02/monitoring.jpeg"><img decoding="async" loading="lazy" class="aligncenter wp-image-22159 size-large" src="/uploads/2022/02/monitoring-1024x534.jpeg" alt="" width="640" height="334" srcset="" sizes="(max-width: 640px) 100vw, 640px"/></a></p>
<p>本文分成下面个部分：</p>
<ul>
<li>公司监控员工的技术手段有哪些？</li>
<li>为什么要监控员工？</li>
<li>外企和国企有什么不一样？</li>
<li>我对此事的看法</li>
</ul>
<p> <a href="/articles/22157.html#more-22157" class="more-link">…</a></p><a href="/articles/22157.html#more-22157" class="more-link">
</a><p class="read-more"><a href="/articles/22157.html#more-22157" class="more-link"></a><a class="btn btn-default" href="/articles/22157.html"> 阅读全文<span class="screen-reader-text"> Read More</span></a></p>
<p></p>
<div id="post-ratings-22157-loading" class="post-ratings-loading"><img src="https://coolshell.cn/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image"/>Loading...</div>
</div>
<footer class="entry-footer">
</footer>
</article>
<nav class="navigation posts-navigation" role="navigation">
<h2 class="screen-reader-text">Posts navigation</h2>
<div class="nav-links">
<div class="row">
<div class="wp-pagenavi" role="navigation">
<span class="pages">第 1 / 74 页</span><span aria-current="page" class="current">1</span><a class="page larger" title="第 2 页" href="/page/2.html">2</a><a class="page larger" title="第 3 页" href="/page/3.html">3</a><a class="page larger" title="第 4 页" href="/page/4.html">4</a><a class="page larger" title="第 5 页" href="/page/5.html">5</a><a class="page larger" title="第 6 页" href="/page/6.html">6</a><a class="page larger" title="第 7 页" href="/page/7.html">7</a><a class="page larger" title="第 8 页" href="/page/8.html">8</a><a class="page larger" title="第 9 页" href="/page/9.html">9</a><a class="page larger" title="第 10 页" href="/page/10.html">10</a><span class="extend">...</span><a class="larger page" title="第 20 页" href="/page/20.html">20</a><a class="larger page" title="第 30 页" href="/page/30.html">30</a><a class="larger page" title="第 40 页" href="/page/40.html">40</a><a class="larger page" title="第 50 页" href="/page/50.html">50</a><a class="larger page" title="第 60 页" href="/page/60.html">60</a><span class="extend">...</span><a class="nextpostslink" rel="next" aria-label="下一页" href="/page/2.html">»</a><a class="last" aria-label="Last Page" href="/page/74.html">末页 »</a>
</div>
</div>
</div>
</nav>
</main>
</div>

</div>
</div>

</div>

</div>















</body></html>